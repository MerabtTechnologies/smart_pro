var k=(x,_,i)=>new Promise((c,a)=>{var v=t=>{try{u(i.next(t))}catch(p){a(p)}},g=t=>{try{u(i.throw(t))}catch(p){a(p)}},u=t=>t.done?c(t.value):Promise.resolve(t.value).then(v,g);u((i=i.apply(x,_)).next())});import{f as F,r as m,a as O,A as w,q as h,t as l,z as I,M as z,l as r,n as d,x as o,k as f,N as b,R as E,v as L,y,F as R,O as $,Q as G}from"./frappe-ui-5f3Xtay5.js";import{u as T,K as S,n as M,J as P,d as V,s as A,q as J,i as K,aa as C,ab as Q,ac as H,ad as W,ae as X}from"./index-jYlo5PL_.js";const Y={class:"flex flex-col items-center justify-center min-h-full"},Z={class:"w-full max-w-sm"},ee={class:"login-card p-6"},oe={class:"mb-4"},te={class:"mb-6"},se={key:0,class:"mt-4 p-3 error-message rounded-lg text-sm"},le={key:1,class:"divider-container my-6"},ae={key:2,class:"social-login-container"},ne=["onClick","disabled"],ie={key:3,class:"text-center py-4"},re={class:"text-center mt-4"},de={__name:"Login",setup(x){const _=z(),i=m(""),c=m(""),a=m(!1),v=m(""),g=m([]),u=m(!0),t=m(!1),p={"logo-google":X,"logo-github":W,"logo-facebook":H,"logo-microsoft":Q,"globe-outline":C};function D(s){return p[s]||C}function B(){return k(this,null,function*(){u.value=!0;try{const s=yield I("smart_pro.smart_pro.api.projects.get_social_login_providers");s&&s.success&&(g.value=s.providers||[])}catch(s){console.error("Error loading social providers:",s)}finally{u.value=!1}})}function N(){return k(this,null,function*(){var s;if(!(!i.value||!c.value)){a.value=!0,v.value="";try{yield I("login",{usr:i.value,pwd:c.value}),_.push("/smart-pro/home")}catch(e){console.error("Login error:",e),v.value=((s=e.messages)==null?void 0:s[0])||"Invalid email or password"}finally{a.value=!1}}})}function U(s){const e=window.location.origin+"/smart-pro/home",n=`${s.url}?redirect_to=${encodeURIComponent(e)}`;window.location.href=n}function j(){const s=localStorage.getItem("smart-pro-theme");if(s==="dark")t.value=!0,document.body.classList.add("dark"),document.body.classList.remove("light");else if(s==="light")t.value=!1,document.body.classList.add("light"),document.body.classList.remove("dark");else{const e=window.matchMedia("(prefers-color-scheme: dark)").matches;t.value=e,e&&document.body.classList.add("dark")}}function q(){t.value=!t.value,t.value?(document.body.classList.add("dark"),document.body.classList.remove("light"),localStorage.setItem("smart-pro-theme","dark")):(document.body.classList.remove("dark"),document.body.classList.add("light"),localStorage.setItem("smart-pro-theme","light"))}return O(()=>{j(),B()}),(s,e)=>(r(),w(l(K),null,{default:h(()=>[d(l(T),{fullscreen:!0,class:"ion-padding login-content"},{default:h(()=>[o("div",Y,[e[4]||(e[4]=o("div",{class:"mb-8 text-center"},[o("div",{class:"w-20 h-20 rounded-2xl bg-primary-500 flex items-center justify-center mx-auto mb-4 logo-container"},[o("span",{class:"text-3xl font-bold text-white"},"SP")]),o("h1",{class:"text-2xl font-bold title-text"}," Smart Pro "),o("p",{class:"subtitle-text"}," Project Management ")],-1)),o("div",Z,[o("div",ee,[o("form",{onSubmit:E(N,["prevent"])},[o("div",oe,[d(l(S),{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=n=>i.value=n),type:"email",placeholder:"Email",fill:"outline",disabled:a.value,class:"login-input",required:""},null,8,["modelValue","disabled"])]),o("div",te,[d(l(S),{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=n=>c.value=n),type:"password",placeholder:"Password",fill:"outline",disabled:a.value,class:"login-input",required:""},null,8,["modelValue","disabled"])]),d(l(M),{expand:"block",type:"submit",disabled:a.value||!i.value||!c.value,class:"login-button"},{default:h(()=>[a.value?(r(),w(l(P),{key:0,name:"crescent",class:"mr-2"})):b("",!0),L(" "+y(a.value?"Signing in...":"Sign In"),1)]),_:1},8,["disabled"])],32),v.value?(r(),f("div",se,y(v.value),1)):b("",!0),g.value.length>0?(r(),f("div",le,[...e[2]||(e[2]=[o("div",{class:"divider-line"},null,-1),o("span",{class:"divider-text"},"or continue with",-1),o("div",{class:"divider-line"},null,-1)])])):b("",!0),g.value.length>0?(r(),f("div",ae,[(r(!0),f(R,null,$(g.value,n=>(r(),f("button",{key:n.name,type:"button",class:"social-login-btn",style:G({"--provider-color":n.color}),onClick:ce=>U(n),disabled:a.value},[d(l(V),{icon:D(n.icon)},null,8,["icon"]),o("span",null,y(n.label),1)],12,ne))),128))])):b("",!0),u.value?(r(),f("div",ie,[d(l(P),{name:"dots",class:"social-spinner"})])):b("",!0)]),e[3]||(e[3]=o("div",{class:"text-center mt-6 text-sm"},[o("a",{href:"/login#forgot",class:"forgot-link"},"Forgot Password?")],-1)),o("div",re,[d(l(M),{fill:"clear",size:"small",onClick:q,class:"theme-toggle-btn"},{default:h(()=>[d(l(V),{icon:t.value?l(A):l(J),slot:"start"},null,8,["icon"]),L(" "+y(t.value?"Light Mode":"Dark Mode"),1)]),_:1})])])])]),_:1})]),_:1}))}},ge=F(de,[["__scopeId","data-v-908685ec"]]);export{ge as default};
//# sourceMappingURL=Login-Dn_TGc7P.js.map
